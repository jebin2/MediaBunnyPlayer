class TimelineManager{constructor(){this.playBtn=document.getElementById("timeline-play-btn"),this.currentTimeDisplay=document.getElementById("timeline-current-time"),this.totalDurationDisplay=document.getElementById("timeline-total-duration"),this.zoomOutBtn=document.getElementById("timeline-zoom-out"),this.zoomInBtn=document.getElementById("timeline-zoom-in"),this.zoomLevelDisplay=document.getElementById("timeline-zoom-level"),this.settingsBtn=document.getElementById("timeline-settings-btn"),this.ruler=document.querySelector(".timeline__ruler"),this.zoomLevel=100,this.isPlaying=!1,this.duration=60,this.pixelsPerSecond=50,this.init()}init(){this.attachEventListeners(),this.updateRuler(),console.log("TimelineManager initialized")}updateRuler(){if(this.ruler){const t=this.duration*this.pixelsPerSecond*(this.zoomLevel/100);let e=this.ruler.querySelector(".timeline__ruler-content");e||(e=document.createElement("div"),e.className="timeline__ruler-content",e.style.height="100%",this.ruler.appendChild(e)),e.style.width=`${t}px`}}attachEventListeners(){this.zoomOutBtn&&this.zoomOutBtn.addEventListener("click",()=>this.handleZoom(-25)),this.zoomInBtn&&this.zoomInBtn.addEventListener("click",()=>this.handleZoom(25)),this.settingsBtn&&this.settingsBtn.addEventListener("click",()=>{console.log("Timeline settings clicked")}),window.addEventListener("preview-player-state-change",t=>{this.updatePlayState(t.detail.isPlaying)}),window.addEventListener("preview-player-time-update",t=>{this.updateTime(t.detail.currentTime)})}togglePlay(){const t=new CustomEvent("timeline-play-toggle");window.dispatchEvent(t)}updatePlayState(t){if(this.isPlaying=t,this.playBtn){const e=this.playBtn.querySelector(".icon");e&&(e.textContent=t?"⏸️":"▶️")}}updateTime(t){this.currentTimeDisplay&&(this.currentTimeDisplay.textContent=this.formatTime(t))}updateDuration(t){this.totalDurationDisplay&&(this.totalDurationDisplay.textContent=this.formatTime(t))}handleZoom(t){let e=this.zoomLevel+t;if(e=Math.max(25,Math.min(400,e)),e!==this.zoomLevel){this.zoomLevel=e,this.zoomLevelDisplay&&(this.zoomLevelDisplay.textContent=`${this.zoomLevel}%`),console.log(`Zoom level: ${this.zoomLevel}%`);const t=new CustomEvent("timeline-zoom-change",{detail:{zoomLevel:this.zoomLevel}});window.dispatchEvent(t)}}formatTime(t){return`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`}}document.addEventListener("DOMContentLoaded",()=>{window.timelineManager=new TimelineManager});