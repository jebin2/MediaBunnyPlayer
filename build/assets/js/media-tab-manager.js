import{StorageHelper}from"./storage-helper.js";export class MediaTabManager{constructor(){this.tabsContainer=document.querySelector(".media-panel__tabs"),this.contentContainer=document.querySelector(".media-panel__content"),this.activeCategory="videos",this.init()}init(){this.tabsContainer&&this.contentContainer?(this.attachEventListeners(),this.loadActiveCategory()):console.warn("Media tab elements not found")}attachEventListeners(){this.tabsContainer.addEventListener("click",e=>{const t=e.target.closest(".media-tab");if(!t)return;const a=t.dataset.mediaTab;a&&this.switchTab(a)}),this.tabsContainer.addEventListener("keydown",e=>{this.handleKeyboardNavigation(e)})}switchTab(e){e!==this.activeCategory&&(console.log(`Switched to category: ${e}`),this.setActiveTab(e),this.showContent(e),this.activeCategory=e,this.saveActiveCategory())}setActiveTab(e){this.tabsContainer.querySelectorAll(".media-tab").forEach(t=>{t.dataset.mediaTab===e?(t.classList.add("active"),t.setAttribute("aria-selected","true")):(t.classList.remove("active"),t.setAttribute("aria-selected","false"))})}showContent(e){this.contentContainer.querySelectorAll(".media-content").forEach(t=>{t.dataset.category===e?t.removeAttribute("hidden"):t.setAttribute("hidden","")})}saveActiveCategory(){StorageHelper.save("active_media_category",this.activeCategory)}loadActiveCategory(){const e=StorageHelper.load("active_media_category"),t=e&&["videos","audio","images","text","effects","projects"].includes(e)?e:"videos";this.switchTab(t)}handleKeyboardNavigation(e){const t=Array.from(this.tabsContainer.querySelectorAll(".media-tab")),a=document.activeElement,i=t.indexOf(a);if(-1===i)return;let s=i;switch(e.key){case"ArrowUp":case"ArrowLeft":e.preventDefault(),s=i-1,s<0&&(s=t.length-1),t[s].focus();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),s=i+1,s>=t.length&&(s=0),t[s].focus();break;case"Enter":case" ":e.preventDefault();const o=a.dataset.mediaTab;o&&this.switchTab(o)}}}document.addEventListener("DOMContentLoaded",()=>{window.mediaTabManager=new MediaTabManager});