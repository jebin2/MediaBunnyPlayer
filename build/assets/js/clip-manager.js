class ClipManager{constructor(){this.clips=[],this.projectDuration=0}createClip(t,i,e,r,n,a){return{id:crypto.randomUUID(),mediaId:t,trackId:i,startTime:e,duration:r,trimStart:0,trimEnd:r,volume:1,muted:!1,locked:!1,visible:!0,type:n,name:a,effects:[]}}addClip(t){this.clips.push(t),this.updateProjectDuration(),console.log("Clip added:",t),window.clipRenderer&&window.clipRenderer.renderClip(t);const i=new CustomEvent("clip-added",{detail:{clip:t}});window.dispatchEvent(i)}getClips(){return this.clips}getClipsByTrack(t){return this.clips.filter(i=>i.trackId===t)}getClip(t){return this.clips.find(i=>i.id===t)}updateClip(t,i){const e=this.getClip(t);if(!e)return;Object.assign(e,i),void 0===i.startTime&&void 0===i.duration||this.updateProjectDuration();const r=new CustomEvent("clip-updated",{detail:{clipId:t,updates:i,clip:e}});window.dispatchEvent(r)}updateProjectDuration(){let t=0;this.clips.forEach(i=>{const e=i.startTime+i.duration;e>t&&(t=e)}),this.projectDuration=Math.max(60,t);const i=new CustomEvent("project-duration-change",{detail:{duration:this.projectDuration}});window.dispatchEvent(i)}}window.clipManager=new ClipManager;export default window.clipManager;