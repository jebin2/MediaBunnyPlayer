export class SubtitleManager{constructor(){this.cues=[],this.activeCues=[]}parse(t){this.cues=[];const e=t.split(/\r\n|\n|\r/);let s=null;for(let t=0;t<e.length;t++){const r=e[t].trim();if(!r||"WEBVTT"===r)continue;const i=r.match(/(\d{2}:\d{2}:\d{2}\.\d{3}|\d{2}:\d{2}\.\d{3})\s-->\s(\d{2}:\d{2}:\d{2}\.\d{3}|\d{2}:\d{2}\.\d{3})/);i?(s&&this.cues.push(s),s={start:this._parseTime(i[1]),end:this._parseTime(i[2]),text:""}):s&&(s.text+=(s.text?"\n":"")+r)}s&&this.cues.push(s),console.log(`Parsed ${this.cues.length} subtitle cues.`)}getActiveCues(t){return this.cues.filter(e=>t>=e.start&&t<=e.end)}_parseTime(t){const e=t.split(":");let s=0;return 3===e.length?(s+=3600*parseInt(e[0]),s+=60*parseInt(e[1]),s+=parseFloat(e[2])):2===e.length&&(s+=60*parseInt(e[0]),s+=parseFloat(e[1])),s}clear(){this.cues=[],this.activeCues=[]}}