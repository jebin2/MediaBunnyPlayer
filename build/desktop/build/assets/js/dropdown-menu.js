class DropdownMenu{constructor(){this.activeMenu=null,this.init()}init(){this.attachMenuButtonHandlers(),this.attachMenuItemHandlers(),this.attachOutsideClickHandler(),this.attachKeyboardHandlers()}attachMenuButtonHandlers(){document.querySelectorAll("[data-menu]").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const n=e.dataset.menu;this.toggleMenu(n,e)})})}toggleMenu(e,t){const n=document.querySelector(`[data-dropdown="${e}"]`);if(!n)return;const a=this.activeMenu===e;this.closeAllMenus(),a||(n.removeAttribute("hidden"),t.setAttribute("aria-expanded","true"),this.activeMenu=e)}closeAllMenus(){const e=document.querySelectorAll("[data-dropdown]"),t=document.querySelectorAll("[data-menu]");e.forEach(e=>{e.setAttribute("hidden","")}),t.forEach(e=>{e.setAttribute("aria-expanded","false")}),this.activeMenu=null}attachMenuItemHandlers(){document.querySelectorAll(".dropdown-menu__item").forEach(e=>{e.addEventListener("click",t=>{const n=e.dataset.action;console.log(`Menu action: ${n}`),this.closeAllMenus()})})}attachOutsideClickHandler(){document.addEventListener("click",()=>{this.activeMenu&&this.closeAllMenus()})}attachKeyboardHandlers(){document.addEventListener("keydown",e=>{if("Escape"===e.key&&this.activeMenu){const e=this.activeMenu;this.closeAllMenus();const t=document.querySelector(`[data-menu="${e}"]`);t&&t.focus()}})}}document.addEventListener("DOMContentLoaded",()=>{new DropdownMenu});