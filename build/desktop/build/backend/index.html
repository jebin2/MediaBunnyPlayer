<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Audio Caption Generator</title><style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#0a0e27;--surface:#141b3d;--primary:#00ff88;--secondary:#ff00ff;--accent:#00d4ff;--error:#ff1744;--text:#ffffff;--border:4px}body{font-family:'Space Grotesk','Courier New',monospace;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;position:relative}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 50%,rgba(0,255,136,.1) 0,transparent 50%),radial-gradient(circle at 80% 80%,rgba(255,0,255,.1) 0,transparent 50%),radial-gradient(circle at 40% 20%,rgba(0,212,255,.1) 0,transparent 50%);pointer-events:none;z-index:0}.container{max-width:1400px;margin:0 auto;padding:2rem;position:relative;z-index:1}header{text-align:center;margin-bottom:3rem;animation:slideDown .6s cubic-bezier(.68,-.55,.265,1.55)}@keyframes slideDown{from{opacity:0;transform:translateY(-50px)}to{opacity:1;transform:translateY(0)}}h1{font-size:clamp(2rem, 5vw, 4rem);font-weight:900;background:linear-gradient(135deg,var(--primary) 0,var(--accent) 50%,var(--secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-transform:uppercase;letter-spacing:-2px;margin-bottom:1rem;position:relative;display:inline-block}h1::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:60%;height:6px;background:linear-gradient(90deg,transparent,var(--primary),transparent);animation:glow 2s ease-in-out infinite}@keyframes glow{0%,100%{opacity:.5}50%{opacity:1}}.subtitle{font-size:1.2rem;color:var(--accent);letter-spacing:2px}.upload-section{background:var(--surface);border:var(--border) solid var(--primary);box-shadow:8px 8px 0 var(--primary);padding:2rem;margin-bottom:3rem;position:relative;transition:all .3s ease;animation:slideUp .6s cubic-bezier(.68,-.55,.265,1.55) .2s both}@keyframes slideUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.upload-section:hover{transform:translate(-2px,-2px);box-shadow:12px 12px 0 var(--primary)}.upload-zone{border:3px dashed var(--accent);padding:3rem;text-align:center;cursor:pointer;transition:all .3s ease;background:rgba(0,212,255,.05)}.upload-zone:hover{background:rgba(0,212,255,.1);border-color:var(--primary)}.upload-zone.dragging{background:rgba(0,255,136,.2);border-color:var(--primary);transform:scale(1.02)}input[type=file]{display:none}.btn{background:var(--primary);color:var(--bg);border:var(--border) solid var(--bg);padding:1rem 2rem;font-size:1.1rem;font-weight:900;text-transform:uppercase;cursor:pointer;transition:all .2s ease;box-shadow:4px 4px 0 var(--bg);letter-spacing:1px;position:relative}.btn:hover:not(:disabled){transform:translate(-2px,-2px);box-shadow:6px 6px 0 var(--bg)}.btn:active:not(:disabled){transform:translate(2px,2px);box-shadow:2px 2px 0 var(--bg)}.btn:disabled{opacity:.6;cursor:not-allowed}.btn-secondary{background:var(--accent)}.btn-small{padding:.5rem 1rem;font-size:.85rem;box-shadow:3px 3px 0 var(--bg)}.btn-small:hover:not(:disabled){box-shadow:4px 4px 0 var(--bg)}.table-section{animation:slideUp .6s cubic-bezier(.68,-.55,.265,1.55) .4s both}.table-wrapper{overflow-x:auto;background:var(--surface);border:var(--border) solid var(--secondary);box-shadow:8px 8px 0 var(--secondary)}table{width:100%;border-collapse:collapse}thead{background:linear-gradient(135deg,var(--primary),var(--accent))}th{padding:1.5rem 1rem;text-align:left;font-weight:900;text-transform:uppercase;letter-spacing:1px;color:var(--bg);border-right:3px solid var(--bg)}th:last-child{border-right:none}tbody tr{border-bottom:2px solid rgba(0,212,255,.2);transition:all .3s ease;animation:fadeIn .5s ease}@keyframes fadeIn{from{opacity:0}to{opacity:1}}tbody tr:hover{background:rgba(0,255,136,.1)}td{padding:1.5rem 1rem;color:var(--text)}.status{display:inline-block;padding:.5rem 1rem;border:3px solid;font-weight:900;text-transform:uppercase;font-size:.85rem;letter-spacing:1px}.status-not_started{background:var(--bg);border-color:var(--accent);color:var(--accent)}.status-processing{background:var(--bg);border-color:var(--primary);color:var(--primary);animation:pulse 1.5s ease-in-out infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}.status-completed{background:var(--primary);border-color:var(--primary);color:var(--bg)}.status-failed{background:var(--error);border-color:var(--error);color:var(--text)}.caption-cell{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.empty-state{text-align:center;padding:4rem 2rem;color:var(--accent);font-size:1.2rem}.refresh-btn{position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;border-radius:50%;background:var(--secondary);border:var(--border) solid var(--bg);box-shadow:4px 4px 0 var(--bg);cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;font-size:1.5rem;z-index:1000}.refresh-btn:hover{transform:rotate(180deg) scale(1.1);box-shadow:6px 6px 0 var(--bg)}.loader-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(10,14,39,.95);display:flex;align-items:center;justify-content:center;z-index:9999;animation:fadeIn .3s ease}.loader{width:80px;height:80px;border:6px solid var(--surface);border-top:6px solid var(--primary);border-right:6px solid var(--accent);border-bottom:6px solid var(--secondary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.loader-text{position:absolute;margin-top:120px;font-size:1.2rem;font-weight:900;color:var(--primary);text-transform:uppercase;letter-spacing:2px}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(10,14,39,.95);z-index:2000;animation:fadeIn .3s ease;overflow-y:auto}.modal.active{display:flex;align-items:center;justify-content:center;padding:2rem}.modal-content{background:var(--surface);border:var(--border) solid var(--primary);box-shadow:12px 12px 0 var(--primary);max-width:800px;width:100%;max-height:80vh;position:relative;animation:modalSlideIn .4s cubic-bezier(.68,-.55,.265,1.55);display:flex;flex-direction:column}@keyframes modalSlideIn{from{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:2rem 2rem 1rem 2rem;border-bottom:3px solid var(--primary);background:var(--surface);position:sticky;top:0;z-index:10}.modal-title{font-size:1.5rem;font-weight:900;color:var(--primary);text-transform:uppercase}.modal-close{background:var(--error);color:var(--text);border:3px solid var(--bg);width:40px;height:40px;border-radius:0;cursor:pointer;font-size:1.5rem;font-weight:900;transition:all .2s ease;box-shadow:3px 3px 0 var(--bg)}.modal-close:hover{transform:translate(-2px,-2px);box-shadow:5px 5px 0 var(--bg)}.code-block{background:var(--bg);border:3px solid var(--accent);padding:1.5rem 1.5rem 1.5rem 1.5rem;border-radius:0;overflow-y:auto;margin:1.5rem 2rem 2rem 2rem;position:relative;flex:1}.code-block code{font-family:'Courier New',monospace;color:var(--primary);font-size:.95rem;line-height:1.6;white-space:pre-wrap;word-break:break-all}.copy-btn{position:sticky;top:.5rem;float:right;background:var(--accent);color:var(--bg);border:3px solid var(--bg);padding:.5rem 1rem;font-size:.8rem;font-weight:900;cursor:pointer;transition:all .2s ease;box-shadow:3px 3px 0 var(--bg);z-index:5}.copy-btn:hover{transform:translate(-2px,-2px);box-shadow:4px 4px 0 var(--bg)}.copy-btn.copied{background:var(--primary)}@media (max-width:768px){.container{padding:1rem}.table-wrapper,.upload-section{box-shadow:4px 4px 0 var(--primary)}td,th{padding:1rem .5rem;font-size:.9rem}.caption-cell{max-width:100px}.modal-content{padding:0}.modal-header{padding:1.5rem 1.5rem 1rem 1.5rem}.code-block{margin:1.5rem 1.5rem 1.5rem 1.5rem}}.notification{position:fixed;top:2rem;right:2rem;padding:1.5rem 2rem;background:var(--primary);color:var(--bg);border:var(--border) solid var(--bg);box-shadow:6px 6px 0 var(--bg);font-weight:900;z-index:2000;animation:slideInRight .5s ease,slideOutRight .5s ease 3.5s}@keyframes slideInRight{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOutRight{to{transform:translateX(400px);opacity:0}}</style></head><body><div class="container"><header><h1>Audio Caption Generator</h1><p class="subtitle">Transcribe ‚Ä¢ Process ‚Ä¢ Analyze</p></header><div class="upload-section"><h2 style="margin-bottom:1.5rem;color:var(--primary)">Upload Audio File</h2><div class="upload-zone" id="uploadZone"><p style="font-size:1.2rem;margin-bottom:1rem">üìÅ Drop audio file here or click to browse</p><p style="color:var(--accent);font-size:.9rem">Supported: WAV, MP3, FLAC, OGG, M4A, AAC</p><input type="file" id="audioFile" accept=".wav,.mp3,.flac,.ogg,.m4a,.aac"></div><button class="btn" id="uploadBtn" style="margin-top:1.5rem;width:100%">üöÄ Upload & Process</button></div><div class="table-section"><h2 style="margin-bottom:1.5rem;color:var(--secondary)">Processing Queue</h2><div class="table-wrapper"><table><thead><tr><th>Filename</th><th>Status</th><th>Caption</th><th>Created</th><th>Processed</th></tr></thead><tbody id="filesTable"><tr><td colspan="5" class="empty-state">No files uploaded yet. Start by uploading an audio file!</td></tr></tbody></table></div></div></div><button class="refresh-btn" id="refreshBtn" title="Refresh">üîÑ</button><div class="loader-overlay" id="loader" style="display:none"><div><div class="loader"></div><div class="loader-text">Uploading...</div></div></div><div class="modal" id="captionModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">üìÑ Caption Details</div><button class="modal-close" onclick="closeModal()">√ó</button></div><div class="code-block"><button class="copy-btn" onclick="copyCaption()">üìã Copy</button> <code id="captionCode"></code></div></div></div><script>const API_URL="/api";let selectedFile=null;const uploadZone=document.getElementById("uploadZone"),fileInput=document.getElementById("audioFile"),loader=document.getElementById("loader"),uploadBtn=document.getElementById("uploadBtn");async function loadFiles(){try{const e=await fetch("/api/files"),t=await e.json(),n=document.getElementById("filesTable");if(0===t.length)return void(n.innerHTML='<tr><td colspan="5" class="empty-state">No files uploaded yet. Start by uploading an audio file!</td></tr>');n.innerHTML=t.map(e=>(e.caption&&(e.caption.length>50?e.caption.substring(0,50):e.caption),`\n                    <tr>\n                        <td><strong>${e.filename}</strong></td>\n                        <td><span class="status status-${e.status}">${e.status.replace("_"," ")}</span></td>\n                        <td class="caption-cell">\n                            ${e.caption?`<button class="btn btn-small btn-secondary" onclick='showCaption(${JSON.stringify(e.caption)})' style="margin-left: 0.5rem;">Show</button>`:"‚Äî"}\n                        </td>\n                        <td>${new Date(e.created_at).toLocaleString()}</td>\n                        <td>${e.processed_at?new Date(e.processed_at).toLocaleString():"‚Äî"}</td>\n                    </tr>\n                `)).join("")}catch(e){console.error("Error loading files:",e)}}function showCaption(e){const t=document.getElementById("captionModal"),n=document.getElementById("captionCode");let o=e;try{const t=JSON.parse(e);o=JSON.stringify(t,null,2)}catch(t){o=e}n.textContent=o,t.classList.add("active")}function closeModal(){document.getElementById("captionModal").classList.remove("active")}function copyCaption(){const e=document.getElementById("captionCode"),t=event.target;navigator.clipboard.writeText(e.textContent).then(()=>{const e=t.textContent;t.textContent="‚úì Copied!",t.classList.add("copied"),setTimeout(()=>{t.textContent=e,t.classList.remove("copied")},2e3)})}function showNotification(e,t="success"){const n=document.createElement("div");n.className="notification",n.textContent=e,"error"===t&&(n.style.background="var(--error)"),document.body.appendChild(n),setTimeout(()=>{n.remove()},4e3)}uploadZone.addEventListener("click",()=>fileInput.click()),uploadZone.addEventListener("dragover",e=>{e.preventDefault(),uploadZone.classList.add("dragging")}),uploadZone.addEventListener("dragleave",()=>{uploadZone.classList.remove("dragging")}),uploadZone.addEventListener("drop",e=>{e.preventDefault(),uploadZone.classList.remove("dragging");const t=e.dataTransfer.files[0];t&&(fileInput.files=e.dataTransfer.files,selectedFile=t,showNotification(`Selected: ${t.name}`))}),fileInput.addEventListener("change",e=>{selectedFile=e.target.files[0],selectedFile&&showNotification(`Selected: ${selectedFile.name}`)}),uploadBtn.addEventListener("click",async()=>{if(!selectedFile)return void showNotification("Please select a file first!","error");const e=new FormData;e.append("audio",selectedFile),loader.style.display="flex",uploadBtn.disabled=!0;try{const t=await fetch("/api/upload",{method:"POST",body:e}),n=await t.json();t.ok?(showNotification("File uploaded successfully! üéâ"),selectedFile=null,fileInput.value="",loadFiles()):showNotification(n.error||"Upload failed","error")}catch(e){showNotification("Network error: "+e.message,"error")}finally{loader.style.display="none",uploadBtn.disabled=!1}}),document.getElementById("captionModal").addEventListener("click",e=>{"captionModal"===e.target.id&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&closeModal()}),document.getElementById("refreshBtn").addEventListener("click",loadFiles),setInterval(loadFiles,6e5),loadFiles()</script></body></html>