<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MediaBunny Player</title>
	<link rel="manifest" href="manifest.json">
	<link rel="stylesheet" href="style.css">
	<meta name="theme-color" content="#1a1a35">
	<link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
	<div class="app-container">
		<div class="header">
			<div class="logo" style="text-align: center;">
				<img src="favicon.ico" alt="Logo" style="width: 40px; height: 40px; vertical-align: middle;" />

				<div style="display: inline-block; text-align: left; margin-left: 8px;">
					<div style="font-size: 1.5em; font-weight: bold;">
						Media Player
					</div>
					<div style="font-size: 0.85em; color: gray; margin-top: 2px;">
						Powered by <strong>MediaBunny</strong>
					</div>
				</div>
			</div>

			<div class="controls-header">
				<button class="btn" id="openFileBtn">Open File</button>
				<button class="btn" id="addFileBtn">Add File(s)</button>
				<button class="btn" id="addFolderBtn">Add Folder</button>

				<!-- New Split Button for Playlist -->
				<div class="split-btn-group">
					<button class="btn" id="togglePlaylistBtn">Playlist</button>
					<button class="btn" id="clearPlaylistBtn" title="Clear Playlist">&times;</button>
				</div>
			</div>
		</div>

		<div class="player-area" id="playerArea">
			<div class="drop-zone" id="dropZone">
				<div class="drop-zone-content">
					<img style="width: 50%;" src="upload.svg" />
					<h2>Drop media files here</h2>
					<button class="btn btn-primary" id="chooseFileBtn">Choose Files</button>
				</div>
			</div>
			<div class="video-container" id="videoContainer">
				<canvas class="video-canvas" id="videoCanvas"></canvas>
				<div class="video-controls" id="videoControls">
					<div class="progress-container" id="progressContainer">
						<div class="progress-bar" id="progressBar"></div>
						<div class="progress-handle" id="progressHandle"></div>
						<!-- New Preview Element -->
						<div id="seekPreview" class="hidden">
							<canvas id="seekPreviewCanvas" width="160" height="90"></canvas>
							<span id="seekPreviewTime">00:00</span>
						</div>
					</div>
					<div class="controls-bottom">
						<div class="controls-left">
							<button class="play-btn" id="playBtn">‚ñ∂</button>
							<div class="time-display" id="timeDisplay">00:00 / 00:00</div>
						</div>
						<div class="controls-right">
							<div class="track-controls">
								<button class="btn track-btn" id="audioTrackBtn">Audio</button>
								<button class="btn track-btn" id="subtitleTrackBtn">Subtitles</button>
								<button class="btn track-btn" id="trimMenuBtn">‚öôÔ∏è</button>
							</div>

							<!-- Add these dropdown menus after the video-controls div: -->
							<div class="track-menu hidden" id="audioTrackMenu">
								<div class="track-menu-content">
									<h4>Audio Tracks</h4>
									<ul id="audioTrackList"></ul>
								</div>
							</div>

							<div class="track-menu hidden" id="subtitleTrackMenu">
								<div class="track-menu-content">
									<h4>Subtitle Tracks</h4>
									<ul id="subtitleTrackList">
										<li class="track-item" data-track-id="none">
											<span>None</span>
										</li>
									</ul>
								</div>
							</div>
							<div class="track-menu hidden" id="trimMenu">
								<div class="track-menu-content">
									<h4>Configs</h4>
									<div class="trim-menu-controls">
										<input type="text" id="startTime" class="time-input" placeholder="00:00">
										<span>-</span>
										<input type="text" id="endTime" class="time-input" placeholder="00:00">
									</div>
									<div class="trim-menu-actions">
										<button class="btn" id="loopBtn">Loop</button>
										<button class="btn" id="cutBtn">Cut Clip</button>
									</div>
								</div>
							</div>
							<div class="volume-container">
								<button class="btn" id="muteBtn">üîä</button>
								<input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.01"
									value="0.7">
							</div>
							<button class="fullscreen-btn" id="fullscreenBtn">‚õ∂</button>
						</div>
					</div>
				</div>
			</div>
			<div class="url-play-overlay hidden" id="urlPlayOverlay">
				<div class="play-button-overlay">‚ñ∂</div>
				<p>Click to play video</p>
			</div>
			<div class="sidebar" id="sidebar">
				<div id="playlistContent"></div>
			</div>
		</div>
		<div class="loading hidden" id="loading">
			<div class="spinner"></div>
			<div id="statusMessage"></div>
		</div>
	</div>

	<input type="file" id="fileInput" multiple accept="video/*,audio/*">
	<input type="file" id="folderInput" webkitdirectory multiple>
	<script type="module" src="script.js"></script>
</body>

</html>